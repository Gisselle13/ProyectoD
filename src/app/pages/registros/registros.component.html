<div class="card animated fadeIn p-2">

    <form [formGroup]="forma" novalidate class="card-text">
        <br>
        <!-- <button (click)="generarNumeroSinRepetir()" class="btn btn-xs btn-info"> <i class="fa fa-retweet"></i>  Generar</button> -->
        <div class="border-top p-1">
            <mat-label>DATOS DEL PACIENTE</mat-label>
            <div class="row">

                <div class="col-lg-6">
                    <mat-form-field appearance="outline">
                        <mat-label>NOMBRE COMPLETO:</mat-label>
                        <input matInput maxlength="200" formControlName="nombre" />
                    </mat-form-field>
                </div>
                <div class="col-lg-4">
                    <mat-form-field appearance="outline">
                        <mat-label>CURP</mat-label>
                        <input matInput maxlength="200" formControlName="curp" />
                    </mat-form-field>
                </div>
                <div class="col-lg-2">
                    <mat-form-field appearance="outline">
                        <mat-label>CÓDIGO</mat-label>
                        <input matInput type="number" formControlName="codigo" />
                    </mat-form-field>
                </div>


            </div>
            <div class="row">
                <div class="col-lg-2">
                    <mat-form-field appearance="outline">
                        <mat-label>EDAD</mat-label>
                        <input matInput maxlength="200" formControlName="edad" />
                    </mat-form-field>
                </div>
                <div class="col-lg-2">
                    <mat-form-field appearance="outline">
                        <mat-label>MESES</mat-label>
                        <input matInput maxlength="200" formControlName="meses" />
                    </mat-form-field>
                </div>
                <div class="col-lg-3">
                    <mat-form-field appearance="outline">
                        <mat-label>Fecha Ingreso</mat-label>
                        <input matInput type="datetime-local" formControlName="fecha_ingreso" />
                    </mat-form-field>
                </div>
                <div class="col-lg-2">
                    <mat-form-field appearance="outline">
                        <mat-label>Fecha Nacimiento</mat-label>
                        <input matInput type="date" formControlName="fecha_nacimiento" />
                    </mat-form-field>
                </div>

                <div class="col-lg-3">
                    <div class="row border p-2" style="border-radius: 10px;">
                        <!-- <div class="col-lg-1 text-right">
                            <mat-icon style="color: red;" *ngIf="!this.forma.value.sexo" matSuffix>
                                error_outline</mat-icon>
                        </div> -->
                        <div class="col-lg-10">
                            <mat-label style="color: black; font-weight: 500;"> SEXO </mat-label>
                            <br>
                            <mat-radio-group class="mat-radio-group-required" aria-label="Select an option" formControlName="sexo">
                                <mat-radio-button color="primary" value="M">M</mat-radio-button>&nbsp;
                                <mat-radio-button color="primary" value="F">F</mat-radio-button>&nbsp;
                            </mat-radio-group>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <mat-form-field appearance="outline">
                    <mat-label>Medico Titular</mat-label>
                    <mat-select [(ngModel)]="medico" formControlName="medico_titular">
                        <mat-option *ngFor="let e of Medicos" [value]="e.value">
                            {{e.viewValue}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
        </div>
        <div class="border-top p-1">
            <label> Dirección</label>

            <div class="row">

                <div class="col-lg-4">
                    <mat-form-field appearance="outline">
                        <mat-label>Calle</mat-label>
                        <input matInput maxlength="200" formControlName="calle" />
                    </mat-form-field>
                </div>
                <div class="col-lg-4">
                    <mat-form-field appearance="outline">
                        <mat-label>Colonia</mat-label>
                        <input matInput maxlength="200" formControlName="colonia" />
                    </mat-form-field>
                </div>
                <div class="col-lg-2">
                    <mat-form-field appearance="outline">
                        <mat-label>N° Exterior</mat-label>
                        <input matInput maxlength="200" formControlName="no_exterior" />
                    </mat-form-field>
                </div>
                <div class="col-lg-2">
                    <mat-form-field appearance="outline">
                        <mat-label>N° Interior</mat-label>
                        <input matInput maxlength="200" formControlName="no_interior" />
                    </mat-form-field>
                </div>
            </div>


            <div class="row">

                <div class="col-lg-3">
                    <mat-form-field appearance="outline">
                        <mat-label>Estado</mat-label>
                        <input matInput maxlength="200" formControlName="estado" />
                    </mat-form-field>
                </div>
                <div class="col-lg-2">
                    <mat-form-field appearance="outline">
                        <mat-label>País</mat-label>
                        <input matInput maxlength="200" formControlName="pais" />
                    </mat-form-field>
                </div>
                <div class="col-lg-3">
                    <mat-form-field appearance="outline">
                        <mat-label>Ciudad</mat-label>
                        <input matInput maxlength="200" formControlName="ciudad" />
                    </mat-form-field>
                </div>
                <div class="col-lg-2">
                    <mat-form-field appearance="outline">
                        <mat-label>Nacionalidad</mat-label>
                        <input matInput maxlength="200" formControlName="nacionalidad" />
                    </mat-form-field>
                </div>
                <div class="col-lg-2">
                    <mat-form-field appearance="outline">
                        <mat-label>C.P.</mat-label>
                        <input matInput maxlength="200" formControlName="codigo_postal" />
                    </mat-form-field>
                </div>
            </div>

        </div>

        <div class="border-top p-1">
            <label> Contacto</label>
            <div class="row">

                <div class="col-lg-3">
                    <mat-form-field appearance="outline">
                        <mat-label>Tel. Casa</mat-label>
                        <input matInput maxlength="200" formControlName="tel_casa" />
                    </mat-form-field>
                </div>
                <div class="col-lg-3">
                    <mat-form-field appearance="outline">
                        <mat-label>Tel. Oficina</mat-label>
                        <input matInput maxlength="200" formControlName="tel_oficina" />
                    </mat-form-field>
                </div>
                <div class="col-lg-3">
                    <mat-form-field appearance="outline">
                        <mat-label>Celular</mat-label>
                        <input matInput maxlength="200" formControlName="celular" />
                    </mat-form-field>
                </div>
                <div class="col-lg-3">
                    <mat-form-field appearance="outline">
                        <mat-label>Correo</mat-label>
                        <input matInput maxlength="200" formControlName="correo" />
                    </mat-form-field>
                </div>

            </div>

        </div>



        <br>




        <!-- 
        <div class="row">
            <div class="col-lg-12">
                <mat-form-field>
                    <mat-label>COMENTARIOS</mat-label>
                    <textarea matInput rows="3" maxlength="5000" formControlName="comentarios"></textarea>
                </mat-form-field>
            </div>
        </div> -->

        <br>
        <div class="row">
            <div class="col-lg-12 text-right">
                <button *ngIf="edit ==0" mat-raised-button color="primary" [disabled]="!forma.valid" (click)="agregarPaciente()">Agregar</button>
                <a class="btn btn-light btn-sm" *ngIf="edit ==1" (click)="editarLlamada(this.idCall)"><i class="fa fa-save"></i>
                        Guardar</a>
            </div>

        </div>
    </form>

    <hr>
    <div class="p-2" *ngIf="idtipousuario!=5 && idtipousuario !=4 ">
        <div class="text-center"><label style="color:midnightblue;">PACIENTES REGISTRADOS </label> </div>
        <div class="col mb-2 text-right">
            Registros por página
            <div class="btn-group btn-group-toggle" ngbRadioGroup name="radioBasic" [(ngModel)]="limit" (ngModelChange)="paginado()">
                <label ngbButtonLabel class="btn-secondary btn-xs"> <input ngbButton type="radio" [value]="10">
                    10 </label>
                <label ngbButtonLabel class="btn-secondary btn-xs"><input ngbButton type="radio" [value]="20">
                    20</label>
                <label ngbButtonLabel class="btn-secondary btn-xs"><input ngbButton type="radio" [value]="30">
                    30</label>
            </div>
        </div>
        <div class="table">

            <div class="table-responsive">
                <table datatable="ng" dt-options="dtOptions" dt-column-defs="DTColumnDefs" class="table table-striped table-bordered table-hover dataTables-example">
                    <thead class="text-center">
                        <tr>
                            <th>ID</th>
                            <th>FECHA INGRESO</th>
                            <th>CÓDIGO</th>
                            <th>NOMBRE</th>
                            <th>CURP</th>
                            <th>EDAD</th>
                            <th> <i class="fa fa-cog"></i> </th>


                        </tr>
                        <tr style="background-color: white;">
                            <th style=" border-right: inset 0pt">
                                <input [(ngModel)]="filtros[0].param" autocomplete="off" (ngModelChange)="filtro.next()" class="redondeado" type="number" placeholder="Filtrar por ID">
                            </th>
                            <th style=" border-right: inset 0pt">
                                <input [(ngModel)]="filtros[1].param" autocomplete="off" (ngModelChange)="filtro.next()" class="redondeado" type="date" placeholder="Fecha Ingreso">
                            </th>
                            <th style=" border-right: inset 0pt">
                                <input [(ngModel)]="filtros[2].param" autocomplete="off" (ngModelChange)="filtro.next()" class="redondeado" type="text" placeholder="Código">
                            </th>
                            <th style=" border-right: inset 0pt">
                                <input [(ngModel)]="filtros[3].param" autocomplete="off" (ngModelChange)="filtro.next()" class="redondeado" type="text" placeholder="Nombre">
                            </th>
                            <th style=" border-right: inset 0pt">
                                <input [(ngModel)]="filtros[4].param" autocomplete="off" (ngModelChange)="filtro.next()" class="redondeado" type="text" placeholder="Curp">
                            </th>

                            <th>
                                <input [(ngModel)]="filtros[5].param" autocomplete="off" (ngModelChange)="filtro.next()" class="redondeado" type="text" placeholder="Curp">
                                <!-- <select [(ngModel)]="filtros[5].param" (ngModelChange)="filtro.next()" class="form-control">
                                <option value="F">F</option>
                                <option value="M">M</option>
                                </select> -->
                            </th>


                            <th></th>


                        </tr>
                    </thead>
                    <tbody class="text-center">
                        <tr *ngFor="let r of registros">
                            <td>{{r.idpaciente}}</td>
                            <td>{{r.fecha_ingreso}}</td>
                            <td>{{r.codigo}}</td>
                            <td>{{r.nombre}}</td>
                            <td>{{r.curp}}</td>
                            <td>{{r.edad}}</td>


                            <!-- <td>{{r.nombre_usuario}}</td> -->
                            <td>
                                <div class="row">
                                    <div class="col-lg-6">
                                        <a class="btn btn-light btn-sm" ngbTooltip="Editar" (click)="obtenerPaciente(r.idpaciente)"><i class="fa fa-edit"></i></a>
                                    </div>
                                    <div class="col-lg-6"><a class="btn btn-danger btn-sm" ngbTooltip="Eliminar" (click)="eliminarLlamada(r.idpaciente)"><i
                                            class="fa fa-trash-alt"></i></a></div>
                                </div>

                            </td>

                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="row ">
            <div class="col left">
                <ngb-pagination [collectionSize]="total" [maxSize]="5" [pageSize]="limit" [(page)]="page" [directionLinks]="true" [rotate]="true" [ellipses]="false" [boundaryLinks]="true" (pageChange)="paginado()">
                </ngb-pagination>
            </div>
            <div class="col text-right ">
                Total de registros: {{total}}
            </div>
        </div>
    </div>








</div>